<!DOCTYPE html>

<html>

	<head>
		<title>Voting App</title>
		
		<link href="/public/css/main.css" rel="stylesheet" type="text/css">
	</head>

	<body>
		<div class="top-menu">
			<div class="home">
				<a href="/polls">
					<div class="btn" id="home-btn">
						<p>Home</p>
					</div>
				</a>
			</div>
			<div class="login">
				<a href="/auth/twitter" onclick="window.open('/auth/twitter', 'twitterWindow', 'width=500, height=650'); return false;">
					<div class="btn" id="login-btn">
						<p>Log in with Twitter</p>
					</div>
				</a>
			</div>

		</div>
		<div class="container">	
			<p class="clementine-text">Voting App</p>
			<p>Select a poll to see voting results and vote.</p>
			<p>Log in with Twitter to create and edit your own polls.</p>
			<div class="polls" id="all-polls">

			</div>
		</div>

		<script type="text/javascript">
			window.loginCallBack = function () {
				console.log("login successful");
				var topMenu = document.getElementsByClassName("top-menu")[0];
				var login = document.getElementsByClassName("login")[0];

				topMenu.removeChild(login);

				// Create my polls link
				var myPollsDiv = document.createElement('div');
				myPollsDiv.className = "my-polls";
				var myPollsAnchor = document.createElement('a');
				myPollsAnchor.setAttribute('href', "/mypolls")
				var myPollsTextDiv = document.createElement('div');
				myPollsTextDiv.className = "btn";
				myPollsTextDiv.id = "my-polls-btn";
				var myPollsText = document.createElement('p');
				myPollsText.innerHTML = "My Polls";
				myPollsTextDiv.appendChild(myPollsText);
				myPollsAnchor.appendChild(myPollsTextDiv);
				myPollsDiv.appendChild(myPollsAnchor);
				topMenu.appendChild(myPollsDiv);

				// Create new poll link
				var newPollDiv = document.createElement('div');
				newPollDiv.className = "my-polls";
				var newPollAnchor = document.createElement('a');
				newPollAnchor.setAttribute('href', "/newpoll")
				var newPollTextDiv = document.createElement('div');
				newPollTextDiv.className = "btn";
				newPollTextDiv.id = "my-polls-btn";
				var newPollText = document.createElement('p');
				newPollText.innerHTML = "New Poll";
				newPollTextDiv.appendChild(newPollText);
				newPollAnchor.appendChild(newPollTextDiv);
				newPollDiv.appendChild(newPollAnchor);
				topMenu.appendChild(newPollDiv);

				
			}
			console.log(login)
			if (login) {
				var topMenu = document.getElementsByClassName("top-menu")[0];
				var login = document.getElementsByClassName("login")[0];

				topMenu.removeChild(login);

				// Create my polls link
				var myPollsDiv = document.createElement('div');
				myPollsDiv.className = "my-polls";
				var myPollsAnchor = document.createElement('a');
				myPollsAnchor.setAttribute('href', "/mypolls")
				var myPollsTextDiv = document.createElement('div');
				myPollsTextDiv.className = "btn";
				myPollsTextDiv.id = "my-polls-btn";
				var myPollsText = document.createElement('p');
				myPollsText.innerHTML = "My Polls";
				myPollsTextDiv.appendChild(myPollsText);
				myPollsAnchor.appendChild(myPollsTextDiv);
				myPollsDiv.appendChild(myPollsAnchor);
				topMenu.appendChild(myPollsDiv);

				// Create new poll link
				var newPollDiv = document.createElement('div');
				newPollDiv.className = "my-polls";
				var newPollAnchor = document.createElement('a');
				newPollAnchor.setAttribute('href', "/newpoll")
				var newPollTextDiv = document.createElement('div');
				newPollTextDiv.className = "btn";
				newPollTextDiv.id = "my-polls-btn";
				var newPollText = document.createElement('p');
				newPollText.innerHTML = "New Poll";
				newPollTextDiv.appendChild(newPollText);
				newPollAnchor.appendChild(newPollTextDiv);
				newPollDiv.appendChild(newPollAnchor);
				topMenu.appendChild(newPollDiv);

			}
		</script>
	</body>

</html>